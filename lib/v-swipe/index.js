!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["@bilibili/sakura"]=e():t["@bilibili/sakura"]=e()}(this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=45)}({0:function(t,e,i){"use strict";i.d(e,"e",(function(){return n})),i.d(e,"a",(function(){return s})),i.d(e,"f",(function(){return a})),i.d(e,"b",(function(){return o})),i.d(e,"d",(function(){return r})),i.d(e,"g",(function(){return l})),i.d(e,"c",(function(){return h}));var n="undefined"==typeof window,s=function(){var t,e,i,n=((null===(t=window)||void 0===t||null===(e=t.navigator)||void 0===e||null===(i=e.connection)||void 0===i?void 0:i.effectiveType)||"").match(/\d+/);return n?Math.max(window.devicePixelRatio-(4-n[0])|0,1):0|window.devicePixelRatio},a=n?null:window.requestIdleCallback||function(t){var e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},o=n?null:window.cancelIdleCallback||function(t){clearTimeout(t)},r=function(t){return!!t&&t.startsWith("http")},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.width,s=e.height,a=e.rule,o=e.webP,r=e.dpr;if(!t)return"";var l=u(t);if(!i&&!s)return l;var h=o?".webp":"",c=a?"_".concat(a):"",d=r||(n?2:0|(window.__img_dpr__||window.devicePixelRatio));return"".concat(l,"@").concat(i*d|0,"w_").concat(0|(s?s*d:i*d),"h").concat(c).concat(h)},h=function(t,e){for(var i=[],n=0;n<t;n++)i.push(e);return i},u=function(t){return t?t.replace(/^http:/,""):""}},1:function(t,e,i){"use strict";function n(t,e,i,n,s,a,o,r){var l,h="function"==typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=i,h._compiled=!0),n&&(h.functional=!0),a&&(h._scopeId="data-v-"+a),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):s&&(l=r?function(){s.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(h.functional){h._injectStyles=l;var u=h.render;h.render=function(t,e){return l.call(e),u(t,e)}}else{var c=h.beforeCreate;h.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:h}}i.d(e,"a",(function(){return n}))},16:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i(5);function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r="v-swipe__clone",l=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wrap=e.wrap,this.loop=e.loop,this.index=e.index,this.animated=e.animated,this.duration=e.duration,this.callback=e.callback,this._calcCssPrefix(),this._setupConst(),this._useAnimate(),this._cloneShadow(),this._bindEvents(),this}var e,i,a;return e=t,(i=[{key:"slide",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t===this.index||this.move||(this._lockEvent(1.2),this._animateSlide(t,this.index,e))}},{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.slides.length;1===e||this.touching||this.move||this.index===e-1&&!this.loop||t&&Date.now()-this.lastNextAt<t||this.slide(this.index+1,!0)}},{key:"destroy",value:function(){var t=this.el,e=this.events;t&&(t.removeEventListener("touchstart",e.touchstart),t.removeEventListener("touchmove",e.touchmove),t.removeEventListener("touchend",e.touchend),window.removeEventListener("orientationchange",e.screenChange),window.removeEventListener("resize",e.screenChange))}},{key:"_updateEvents",value:function(t){this.destroy(),this.el=this.slides[t],this.index=t,this.events={},this._bindEvents()}},{key:"_setupConst",value:function(){this.slides=s([].map.call(this.wrap.children,(function(t){return t}))),this.startAt=0,this.lastNextAt=0,this.move=!1,this.touching=!1,this.isMoveSlide=!1,this.maxDeltaPoint={x:0,y:0},this.deltaPoint={x:0,y:0},this.el=this.slides[this.index],this.events={}}},{key:"_cloneShadow",value:function(){var t=this.slides,e=this.index,i=this.offsetWidth,n=this.wrap;if(this.loop&&1!==t.length){var s=n.querySelectorAll(".".concat(r));s.length&&[].forEach.call(s,(function(t){n.removeChild(t)}));var a=t[t.length-1].cloneNode(!0),o=t[0].cloneNode(!0);a.classList.add(r),o.classList.add(r),this.wrap.appendChild(a),this.wrap.appendChild(o),a.style.transform="translateX(".concat((-1-e)*i,"px)"),o.style.transform="translateX(".concat((t.length-e)*i,"px)"),this.beforeShadow=a,this.afterShadow=o}}},{key:"_removeClone",value:function(){var t=this.slides,e=this.wrap;if(this.loop&&1!==t.length){var i=e.querySelectorAll(".".concat(r));[].forEach.call(i,(function(t){e.removeChild(t)}))}}},{key:"_useAnimate",value:function(){var t=this,e=this.wrap.offsetWidth;if(e||setTimeout((function(){t._useAnimate()}),100),this.offsetWidth=e,this.animated){var i=this.slides,n=this.index;[].forEach.call(i,(function(t,i){t.style.transform="translateX(".concat((i-n)*e,"px)")}))}}},{key:"_bindEvents",value:function(){if(1!==this.slides.length){var t=this.el,e=this.events;t&&(e.touchstart=this._start.bind(this),e.touchmove=this._move.bind(this),e.touchend=this._end.bind(this),e.screenChange=this._screenChange.bind(this),t.addEventListener("touchstart",e.touchstart),t.addEventListener("touchmove",e.touchmove),t.addEventListener("touchend",e.touchend),window.addEventListener("orientationchange",e.screenChange),window.addEventListener("resize",e.screenChange))}}},{key:"_screenChange",value:function(){var t=this;setTimeout((function(){t._useAnimate(),t._removeClone(),t._cloneShadow()}),50)}},{key:"_start",value:function(t){this.touching=!0;var e=t.touches[0];this.startPoint={x:e.pageX,y:e.pageY},this.startAt=+new Date}},{key:"_move",value:function(t){if(!(t.touches.length>1)){var e=t.touches[0];if(!(e.pageX<0)){var i=this.startPoint,n=this.maxDeltaPoint,s={x:e.pageX-i.x,y:e.pageY-i.y};if(this.maxDeltaPoint={x:Math.max(n.x,Math.abs(s.x)),y:Math.max(n.y,Math.abs(s.y))},this.deltaPoint=s,this.isMoveSlide=!0,!this._isVerticalScroll(this.maxDeltaPoint)&&(t.preventDefault(),t.stopPropagation(),this.animated&&!this._isEnded(s))){var a=s.x,o=a>0,r=this.slides,l=this.index,h=this.offsetWidth;this._translate(r[l],a),o?this._translate(r[l-1],a-h):this._translate(r[l+1],h+a),this._loopAdjust(o,l,a)}}}}},{key:"_end",value:function(){if(this.touching=!1,this.startAt&&this.isMoveSlide){this.isMoveSlide=!1;var t=this.maxDeltaPoint,e=this.deltaPoint,i=this.offsetWidth,n=e.x>0;if(this.maxDeltaPoint={x:0,y:0},this._isVerticalScroll(t)||this._isEnded(e)||!this._isValidSlide(e)){if(!this.animated)return;var s=this.slides,a=this.index,o=this.duration;return this._translate(s[a],0,o),n?(this._translate(s[a-1],-i,o),this._translate(s[a+1],i)):(this._translate(s[a+1],i,o),this._translate(s[a-1],-i)),this.loop&&(n&&0===a?this._translate(this.beforeShadow,-i,o):n||a!==s.length-1||this._translate(this.afterShadow,i,o)),void this._lockEvent()}var r=n?this.index-1:this.index+1;if(this.animated){var l=this.slides,h=this.index,u=this.duration;this._translate(l[h],n?i:-i,u),this._translate(l[h-1],n?0:-i,n?u:0),this._translate(l[h+1],n?i:0,n?0:u),this.loop&&(r=this._loopJump(n,h,r))}this.callback&&this.callback(r),this._updateEvents(r),this._lockEvent()}}},{key:"_animateSlide",value:function(t,e,i){var n=this;if(this.animated){var s=this.offsetWidth,a=this.slides,o=this.duration,r=t<e;this._loopAdjust(r,t),this._translate(a[t],r?-s:s);var l=t;setTimeout((function(){n._translate(a[t],0,o),n._translate(a[e],r?s:-s,o),e!==t+1&&n._translate(a[t+1],s),e!==t-1&&n._translate(a[t-1],-s),n.loop&&(l=n._loopJump(r,e,t)),n._updateEvents(l),i&&setTimeout((function(){n.callback&&n.callback(l)}),n.duration)}),0)}}},{key:"_loopJump",value:function(t,e,i){var n,s=this.slides,a=this.duration,o=this.offsetWidth;return t&&0===e?(n=s.length-1,this._translate(this.beforeShadow,0,a),this._translate(this.afterShadow,o),this._loopReset(!0)):t||e!==s.length-1?n=i:(n=0,this._translate(this.afterShadow,0,a),this._translate(this.beforeShadow,-o),this._loopReset(!1)),n}},{key:"_loopAdjust",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.loop){var n=this.offsetWidth,s=this.slides;t&&0===e?this._translate(this.beforeShadow,i-n):t||e!==s.length-1||this._translate(this.afterShadow,n+i)}}},{key:"_loopReset",value:function(t){var e=this,i=this.offsetWidth,n=this.slides;setTimeout((function(){t?(e._translate(n[n.length-1],0,0),e._translate(n[n.length-2],-i,0),e._translate(e.beforeShadow,i,0)):(e._translate(n[0],0,0),e._translate(n[1],i,0),e._translate(e.afterShadow,-i,0))}),this.duration)}},{key:"_lockEvent",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.lastNextAt=Date.now(),this.move=!0,setTimeout((function(){t.move=!1}),this.duration*e)}},{key:"_isVerticalScroll",value:function(t){return Math.abs(t.x)<1.5*Math.abs(t.y)}},{key:"_isValidSlide",value:function(t){var e=Math.abs(t.x),i=Number(+new Date-this.startAt)<250&&e>20||e>this.offsetWidth/2;return this.startAt=0,i}},{key:"_translate",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t&&(t.style["".concat(this.cssPrefix,"transition-duration")]=n?"".concat(n,"ms"):"",requestAnimationFrame((function(){t.style["".concat(i.cssPrefix,"transform")]="translateX(".concat(e,"px)")})))}},{key:"_isEnded",value:function(t){if(this.loop)return!1;var e=t.x>0;return e&&0===this.index||!e&&this.index===this.slides.length-1}},{key:"_calcCssPrefix",value:function(){this.animated&&(this.cssPrefix=Object(n.c)())}}])&&o(e.prototype,i),a&&o(e,a),t}()},45:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.length?i("div",{staticClass:"v-swipe",on:{touchstart:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()},touchend:function(t){t.stopPropagation()}}},[i("div",{ref:"wrap",staticClass:"v-swipe__wrap"},t._l(t.length,(function(e,n){return i("div",{key:e,staticClass:"v-swipe__item"},[t._t(""+n)],2)})),0),t._v(" "),t.length>1&&t.indicator?i("div",{staticClass:"v-swipe__indicator"},t._l(t.length,(function(e,n){return i("div",{key:e,staticClass:"v-swipe__indicator__item",class:{"is-active":n===t.active}})})),0):t._e()]):t._e()};n._withStripped=!0;var s=i(16),a={name:"VSwipe",props:{duration:{type:Number,default:500},autoplay:{type:Number,default:2e3},index:{type:Number,default:0},loop:{type:Boolean,default:!0},length:{type:Number,default:0},indicator:{type:Boolean,default:!0}},data:function(){return{active:this.index,timer:0,slider:null,stats:[this.index]}},mounted:function(){this.init()},beforeDestroy:function(){clearInterval(this.timer),this.slider&&this.slider.destroy()},methods:{init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=this.$refs.wrap;if(i&&i.children)this.slider=new s.a({wrap:i,loop:this.loop,index:this.active,animated:!0,duration:this.duration,callback:function(e){t.active=e,t.$emit("change",e),~t.stats.indexOf(e)||(t.stats.push(e),t.$emit("report",e))}}),this.play(),this.$emit("change",this.active),this.$emit("report",this.active);else{if(e>20)return;setTimeout((function(){t.init(e+1)}),100)}},play:function(){var t=this;this.autoplay&&(this.timer=setInterval((function(){t.slider.offsetWidth&&t.slider.next(t.autoplay)}),this.autoplay))},reClone:function(){this.slider&&this.slider._cloneShadow()},jump:function(t){this.slider&&this.slider.slide(t)}}},o=i(1),r=Object(o.a)(a,n,[],!1,null,null,null);r.options.__file="src/components/swipe/swipe.vue";var l=r.exports;e.default=l},5:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return a})),i.d(e,"c",(function(){return o}));var n=i(0),s=function(){if(!n.e)return document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)}}(),a=function(){if(!n.e)return document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)}}(),o=function(){var t="",e=/^(Webkit|Khtml|Moz|ms|O)(?=[A-Z])/,i=document.getElementsByTagName("script")[0].style;for(var n in i)e.test(n)&&(t="-"+n.match(e)[0].toLowerCase()+"-");return!t&&"WebkitOpacity"in i&&(t="-webkit-"),!t&&"KhtmlOpacity"in i&&(t="-khtml-"),t}}})}));