/* Automatically generated by './build/gen-docfile.js' */
const utils = require('../../build/utils')
const pkg = require('./../../package')
const isProd = process.env.NODE_ENV === 'production'

const components = [
  '/components/affix',
  '/components/button',
  '/components/check-box',
  '/components/collapse',
  '/components/datetime',
  '/components/dialog',
  '/components/drawer',
  '/components/field',
  '/components/form',
  '/components/img',
  '/components/lazy',
  '/components/link',
  '/components/navbar',
  '/components/noticebar',
  '/components/picker',
  '/components/range',
  '/components/render',
  '/components/scroller',
  '/components/search',
  '/components/slidingdrawer',
  '/components/step',
  '/components/swipe',
  '/components/switcher',
  '/components/toggle',
  '/components/uploader',
]

const prototypes = [
  '/components/alert',
  '/components/cache',
  '/components/debug',
  '/components/overlay',
  '/components/scrolly',
  '/components/toast',
]

const directives = [
  '/components/lazyload',
]

const transition = [
  '/components/collapseTransition',
]

module.exports = {
  title: pkg.name + ' ' + pkg.version,
  base: isProd ? pkg.prefix_url : '/',
  evergreen: true,
  host: utils.getLocalIP(),
  define: {
    'process.env.LOCAL_IP': utils.getLocalIP(),
  },
  configureWebpack: (config, isServer) => {
    if (isProd) {
      config.output.publicPath = pkg.deploy_url
    }
  },
  chainWebpack: (config, isServer) => {
    config.module
      .rule('compile')
      .test(/\.scss$/)
      .use('style-resources-loader')
      .loader('style-resources-loader')
      .options({
        patterns: ['src/theme/global/mixin.scss', 'src/theme/global/var.scss']
      })
  },
  head: [
    ['link', { rel: 'shortcut icon', href: 'http://s1.hdslb.com/bfs/static/sakura-h5/favicon.png' }]
  ],
  alias: {
    '~/': '../../'
  },
  plugins: [
    [
      'vuepress-plugin-dehydrate',
      {
        noSSR: '*.html'
      }
    ],
    'code-gen-box'
  ],
  themeConfig: {
    sidebar: [
      {
        title: '开发指南',
        collapsable: false,
        children: [
          '/guide/start',
          '/guide/theme',
          '/guide/contributing',
          '/guide/changes'
        ]
      },
      {
        title: '组件',
        collapsable: false,
        children: components
      },
      {
        title: '方法',
        collapsable: false,
        children: prototypes
      },
      {
        title: '指令',
        collapsable: false,
        children: directives
      },
      {
        title: '过度',
        collapsable: false,
        children: transition
      }
    ]
  }
}
